{% extends "custom_admin/base.html" %} {% block title %}Delete Knowledge Base Article{% endblock %} {% block extrastyle %}
<style>
  .delete-card {
    border-radius: 15px;
    overflow: hidden;
  }

  .warning-icon {
    font-size: 2.5rem;
    color: var(--danger);
  }

  .article-preview {
    background-color: #f8f9fa;
    border-radius: 8px;
    padding: 1.5rem;
    border-left: 4px solid var(--danger);
  }

  .article-preview h5 {
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 1rem;
  }

  .article-preview-content {
    max-height: 300px;
    overflow-y: auto;
  }

  .badge {
    font-size: 85%;
    font-weight: 500;
  }
</style>
{% endblock %} {% block content %}
<div class="container-fluid">
  <!-- Page Heading -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0 text-gray-800"><i class="fas fa-trash me-2 text-danger"></i> Delete Article</h1>
    <div>
      <a href="{% url 'custom_admin_knowledge_base_detail' article.id %}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-1"></i> Back to Article
      </a>
    </div>
  </div>

  <!-- Delete Warning Card -->
  <div class="card shadow mb-4 delete-card">
    <div class="card-header py-3">
      <h6 class="m-0 font-weight-bold text-danger"><i class="fas fa-exclamation-triangle me-1"></i> Confirm Deletion</h6>
    </div>
    <div class="card-body">
      <div class="text-center mb-4">
        <i class="fas fa-exclamation-circle warning-icon mb-3"></i>
        <h4 class="text-danger">Warning: This action cannot be undone</h4>
        <p class="text-muted">You are about to permanently delete the knowledge base article:</p>
        <h5 class="font-weight-bold">"{{ article.title }}"</h5>
      </div>

      <div class="alert alert-danger">
        <i class="fas fa-info-circle me-2"></i>
        <strong>Please note:</strong> All related data, including attachments and statistics, will be permanently removed from the system.
      </div>

      <div class="article-preview mb-4">
        <h5>Article Preview</h5>
        <div class="d-flex mb-3">
          <div class="me-3">
            <i class="far fa-user text-muted me-1"></i>
            {{ article.author.username }}
          </div>
          <div class="me-3">
            <i class="far fa-calendar text-muted me-1"></i>
            {{ article.created_at }}
          </div>
          <div>
            <i class="far fa-eye text-muted me-1"></i>
            {{ article.view_count }} views
          </div>
        </div>

        <div class="mb-3">
          {% if article.topic %}
          <span class="badge bg-primary me-1">{{ article.topic.name }}</span>
          {% endif %} {% for tag in article.tags %}
          <span class="badge bg-secondary me-1">{{ tag.name }}</span>
          {% endfor %}
        </div>

        <div class="article-preview-content">{{ article.content|truncatewords:100|linebreaks }}</div>
      </div>

      <form method="post" id="deleteForm" class="mt-4">
        {% csrf_token %}
        <div class="d-flex justify-content-between">
          <a href="{% url 'custom_admin_knowledge_base_detail' article.id %}" class="btn btn-outline-secondary">
            <i class="fas fa-times me-1"></i> Cancel
          </a>
          <button type="submit" class="btn btn-danger"><i class="fas fa-trash me-1"></i> Permanently Delete Article</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %} {% block extrascripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const deleteForm = document.getElementById("deleteForm");

    deleteForm.addEventListener("submit", function (event) {
      const confirmed = confirm("Are you absolutely sure you want to delete this article? This action cannot be undone.");

      if (!confirmed) {
        event.preventDefault();
      }
    });
  });
</script>
{% endblock %}
